# 计算机网络专项面试题库

---

## 第 1 题：TCP 三次握手

**问题：**
请简述 TCP 三次握手的过程，以及为什么需要三次而不是两次？

**标准答案：**

1. 第一次握手：客户端发送 SYN 报文（seq=x），表示希望建立连接。
2. 第二次握手：服务端收到 SYN 后，回复 SYN+ACK（seq=y, ack=x+1），确认收到客户端请求，同时自己准备好。
3. 第三次握手：客户端收到 SYN+ACK 后，发送 ACK（ack=y+1），确认服务端的 SYN。
4. 双方进入 ESTABLISHED 状态，连接建立成功。

**为什么三次握手**：

* 确认双方收发能力正常。
* 防止旧连接报文干扰新连接（历史连接问题）。
* 同步初始序列号。

**补充要点：**

* 面试官可能会追问“如果只做两次会怎样”，需要说明可能出现半连接或历史连接干扰问题。

---

## 第 2 题：TCP 四次挥手

**问题：**
请描述 TCP 四次挥手的过程，以及为什么需要四次才能关闭连接？

**标准答案：**

1. 客户端发送 FIN（seq=u），表示自己没有数据要发。
2. 服务端回复 ACK（ack=u+1），确认客户端 FIN。
3. 服务端发送 FIN（seq=v），表示自己也要关闭。
4. 客户端回复 ACK（ack=v+1），进入 TIME\_WAIT 状态，等待 2MSL 后关闭连接。

* 四次挥手是因为 TCP 是全双工连接，双方需要分别关闭各自的发送通道。

**补充要点：**

* TIME\_WAIT 的存在是为了保证最后的 ACK 能到达，避免服务端进入半关闭状态。

---

## 第 3 题：TIME\_WAIT 的意义

**问题：**
TIME\_WAIT 状态存在的意义是什么？为什么客户端要等待 2MSL？

**标准答案：**

1. 保证最后一个 ACK 可靠送达，避免服务端长时间处于 LAST\_ACK。
2. 防止旧连接数据干扰新连接，保证新连接不会收到旧连接残留的报文。

---

## 第 4 题：HTTP 长连接和短连接

**问题：**
HTTP 长连接和短连接有什么区别？长连接如何依赖 TCP 实现？

**标准答案：**

* 短连接：每次请求都建立新的 TCP 连接，响应后立即关闭。
* 长连接：通过 `Connection: keep-alive` 在一个 TCP 连接内完成多个请求响应。
* 依赖 TCP：长连接本质上是复用同一个 TCP 连接，TCP 三次握手只进行一次，减少连接建立开销。

**补充要点：**

* HTTP/1.1 默认启用长连接。
* HTTP/2 支持多路复用，提高并发性能。

---

## 第 5 题：TCP 可靠性机制

**问题：**
TCP 是可靠的协议，它是通过哪些机制保证可靠性的？

**标准答案：**

1. 序列号（保证数据有序）。
2. 确认应答（ACK，保证数据送达）。
3. 超时重传和快速重传（保证丢失数据重发）。
4. 滑动窗口（保证高效传输和顺序性）。
5. 流量控制（避免接收方被压垮）。
6. 拥塞控制（避免网络过载）。

**补充要点：**

* 建立阶段（三次握手）和断开阶段（四次挥手 + TIME\_WAIT）也是可靠性保证的一部分。

---

## 第 6 题：TCP 流量控制

**问题：**
TCP 的流量控制是怎么实现的？

**标准答案：**

* 通过滑动窗口，接收方在 ACK 报文中通告可接收的窗口大小（rwnd）。
* 发送方根据 rwnd 调整发送速率，避免发送过快压垮接收方。
* 如果 rwnd=0，发送方暂停发送，并定期发送零窗口探测，等待接收方恢复。

**补充要点：**

* 流量控制关注端到端接收能力，拥塞控制关注网络负载。

---

## 第 7 题：HTTP 与 HTTPS 区别

**问题：**
HTTP 和 HTTPS 有什么区别？HTTPS 如何保证安全性？

**标准答案：**

* 区别：

  1. HTTP 明文传输，HTTPS 数据加密。
  2. HTTPS 在 TCP 连接基础上进行 TLS 握手。
  3. HTTPS 使用数字证书验证身份。
* 安全性保证：

  1. 身份认证（证书验证）。
  2. 密钥交换（RSA 或 ECDHE）。
  3. 对称加密通信（如 AES）。
  4. 完整性校验（MAC / AEAD，防篡改）。

---

## 第 8 题：HTTP 请求流程

**问题：**
从输入 URL 到页面展示，HTTP 请求经历了哪些步骤？

**标准答案：**

1. 浏览器解析 URL → 协议、主机、端口、路径。
2. DNS 查询 → 得到 IP。
3. 建立 TCP 连接 → 三次握手。
4. HTTPS 需 TLS 握手。
5. 发送 HTTP 请求 → 构造报文。
6. 服务器处理并返回响应。
7. 浏览器渲染页面 → 构建 DOM/CSSOM → 布局 → 绘制 → 合成。
8. 连接管理 → 长连接复用或 HTTP/2 多路复用。

---

## 第 9 题：TCP 粘包和拆包

**问题：**
粘包和拆包是什么？为什么发生？怎么解决？

**标准答案：**

* 粘包：多个应用层消息合在一起到达。
* 拆包：一个应用层消息被拆成多个 TCP 报文到达。
* 原因：TCP 是字节流协议，没有消息边界；Nagle 算法或连续写入可能导致合并或拆分。
* 解决方法：

  1. 固定长度消息。
  2. 特殊分隔符（如 `\n`、`\r\n\r\n`）。
  3. 消息头 + 消息体（头部记录长度，接收方先读头再读体）。

---

## 第 10 题：TCP 与 UDP 区别

**问题：**
TCP 和 UDP 的区别，以及典型应用场景？

**标准答案：**

| 特性      | TCP               | UDP                |
| ------- | ----------------- | ------------------ |
| 连接      | 面向连接（三次握手）        | 无连接                |
| 传输方式    | 字节流               | 报文/数据报             |
| 可靠性     | 有（确认、重传、顺序）       | 不保证可靠性             |
| 拥塞/流量控制 | 有                 | 无                  |
| 速度      | 较慢                | 快                  |
| 典型应用场景  | HTTP/HTTPS、FTP、邮件 | DNS 查询、视频直播、游戏实时通信 |
